<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Potvrda e-mail adrese</title>
    <!-- Include Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>
<body style="background-color: #eee;">
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <h2 class="mt-5">Potvrda e-mail adrese</h2>
            <p th:text="${confirmationMessage}"></p>
            <p id="countdownMessage">BiÄ‡ete preusmereni za <span id="countdown">5</span> s.</p>
        </div>
    </div>
</div>

<!-- JavaScript for countdown and redirection -->
<script th:inline="javascript">
    /*<![CDATA[*/
    var redirectUrl = /*[[@{${redirectUrl}}]]*/ '';

    // Function to start the countdown
    function startCountdown() {
        var countdown = 5; // Initial countdown value
        var countdownElement = document.getElementById("countdown");

        // Function to update the countdown element
        function updateCountdown() {
            countdownElement.innerText = countdown;
        }

        // Function to handle the countdown
        function countdownFunction() {
            updateCountdown();
            if (countdown === 0) {
                window.location.href = redirectUrl; // Redirect after countdown
            } else {
                countdown--;
                setTimeout(countdownFunction, 1000); // Call itself after 1 second
            }
        }

        countdownFunction(); // Start the countdown
    }

    // Call the startCountdown function when the page loads
    window.onload = startCountdown;
    /*]]>*/
</script>
</body>
</html>
